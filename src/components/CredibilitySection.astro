---
const images = await Astro.glob('../assets/images/samuel-*.*');
---

<section id="expertise" class="w-full py-20 overflow-hidden">
  <div class="w-full">

    <!-- Header -->
    <div class="flex flex-col items-center text-center gap-4 mb-12">
      <div class="inline-flex px-4 py-2 rounded-full border border-white/12 bg-linear-to-r from-white/4 to-transparent">
        <span class="text-white text-xs font-medium leading-tight">
          âœ¨ Credibilidade e Expertise Comprovada
        </span>
      </div>

      <h2 class="text-3xl lg:text-4xl font-semibold text-[#F2F2F2] font-outfit leading-tight max-w-md">
        Em quem vocÃª confia para aprender IA?
      </h2>

      <p class="text-sm text-white/80 leading-normal max-w-lg">
        Com +15 anos de experiÃªncia e reconhecido por liderar a <br />
        inovaÃ§Ã£o em empresas como DELL e HP, Samuel Santiago nÃ£o <br />
        apenas fala sobre transformaÃ§Ã£o digital; ele a entrega.
      </p>
    </div>

    <!-- Carousel -->
    <div class="relative w-full overflow-visible">
      <div class="carousel-stage relative mx-auto overflow-visible">

        <!-- Prev -->
        <button
          class="carousel-prev absolute top-1/2 -translate-y-1/2 z-30 w-12 h-12 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition"
          aria-label="Anterior"
        >
          <i class="ri-arrow-left-line text-white text-3xl"></i>
        </button>

        <!-- Track -->
        <div class="carousel-track relative flex items-center justify-center h-[24rem] overflow-visible">
          {images.map((image, index) => (
            <div
              class={`carousel-item ${index === 1 ? 'is-active' : ''}`}
              data-index={index}
            >
              <img src={image.default.src} alt={`Imagem ${index + 1}`} />
              <div class="badge">ðŸ’¡ Encontros AcadÃªmicos - FLF 2025</div>
            </div>
          ))}
        </div>

        <!-- Next -->
        <button
          class="carousel-next absolute top-1/2 -translate-y-1/2 z-30 w-12 h-12 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition"
          aria-label="PrÃ³ximo"
        >
          <i class="ri-arrow-right-line text-white text-3xl"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Styles -->
  <style>
    :root {
      --slide-width: 39.375rem;
      --side-offset: 34rem;
      --side-scale: 0.55;
    }

    .carousel-stage {
      width: var(--slide-width);
    }

    .carousel-prev {
      left: -2.5rem;
      cursor: pointer;
    }

    .carousel-next {
      right: -2.5rem;
      cursor: pointer;
    }

    .carousel-track {
      perspective: 75rem;
    }

    .carousel-item {
      position: absolute;
      width: var(--slide-width);
      height: 22.125rem;
      border-radius: 1rem;
      overflow: hidden;
      border: 0.0625rem solid rgba(255, 255, 255, 0.12);
      opacity: 0.5;
      transform: scale(0.85) translateY(2rem);
      transition: transform 0.5s ease, opacity 0.5s ease, z-index 0.5s ease;
      z-index: 10;
      will-change: transform;
    }

    .carousel-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .carousel-item.is-active {
      transform: scale(1.05);
      opacity: 1;
      z-index: 20;
    }

    .carousel-item.is-left {
      transform: translateX(calc(-1 * var(--side-offset)))
        scale(var(--side-scale))
        translateY(2.25rem);
    }

    .carousel-item.is-right {
      transform: translateX(var(--side-offset))
        scale(var(--side-scale))
        translateY(2.25rem);
    }

    .badge {
      position: absolute;
      top: 1rem;
      left: 50%;
      transform: translateX(-50%);
      padding: 0.375rem 0.875rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      color: white;
      border: 0.0625rem solid rgba(255, 255, 255, 0.12);
      background: linear-gradient(to right, rgba(255, 255, 255, 0.08), transparent);
      backdrop-filter: blur(0.375rem);
      white-space: nowrap;
    }
  </style>

  <!-- Script -->
  <script type="module">
    const items = Array.from(document.querySelectorAll('.carousel-item'));
    const prev = document.querySelector('.carousel-prev');
    const next = document.querySelector('.carousel-next');

    let active = 1;

    function render() {
      items.forEach((item, index) => {
        item.classList.remove('is-active', 'is-left', 'is-right');

        const offset = (index - active + items.length) % items.length;

        if (offset === 0) item.classList.add('is-active');
        if (offset === items.length - 1) item.classList.add('is-left');
        if (offset === 1) item.classList.add('is-right');
      });
    }

    prev.addEventListener('click', () => {
      active = (active - 1 + items.length) % items.length;
      render();
    });

    next.addEventListener('click', () => {
      active = (active + 1) % items.length;
      render();
    });

    render();
  </script>
</section>
