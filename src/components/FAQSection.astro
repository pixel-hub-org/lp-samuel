---
// src/components/FAQSection.astro
---

---
---

<section id="faq" class="w-full py-20">
  <div class="max-w-7xl mx-auto px-6 lg:px-24">
    <!-- Header -->
    <div
      class="flex flex-col items-center text-center gap-4 mb-12 max-w-md mx-auto"
    >
      <h2
        class="text-3xl lg:text-4xl font-semibold text-[#F2F2F2] font-outfit leading-tight"
      >
        F.A.Q
      </h2>
      <p class="text-sm text-white/80 leading-normal">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua.
      </p>
    </div>

    <!-- FAQ Items -->
    <div class="flex flex-col gap-8 max-w-3xl mx-auto" data-faq>
      <!-- FAQ Item 1 -->
      <div
        class="faq-item relative flex flex-col gap-2 p-6 rounded-lg border border-white/12 bg-linear-to-r from-white/4 to-transparent transition-all duration-300 ease-out"
      >
        <div class="flex items-start justify-between cursor-pointer faq-trigger">
          <h3
            class="text-lg font-semibold text-[#F2F2F2] font-outfit leading-tight"
          >
            Preciso saber programar?
          </h3>
          <button
            class="shrink-0 w-6 h-6 text-[#F2F2F2] cursor-pointer"
            aria-label="Expandir"
          >
            <svg
              fill="currentColor"
              viewBox="0 0 24 24"
              class="faq-icon cursor-pointer transition-transform duration-300"
            >
              <path
                d="M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"
              ></path>
            </svg>
          </button>
        </div>

        <p
          class="faq-content max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out text-sm text-white/80 leading-normal pt-2"
        >
          Não. A mentoria é focada em aplicação estratégica, não em código.
        </p>
      </div>

      <!-- FAQ Item 2 -->
      <div
        class="faq-item relative flex flex-col gap-2 p-6 rounded-lg border border-white/12 bg-linear-to-r from-white/4 to-transparent transition-all duration-300 ease-out"
      >
        <div class="flex items-start justify-between cursor-pointer faq-trigger">
          <h3
            class="text-lg font-semibold text-[#F2F2F2] font-outfit leading-tight"
          >
            Quando começo a ver resultados?
          </h3>
          <button
            class="shrink-0 w-6 h-6 text-[#F2F2F2] cursor-pointer"
            aria-label="Expandir"
          >
            <svg
              fill="currentColor"
              viewBox="0 0 24 24"
              class="faq-icon cursor-pointer transition-transform duration-300"
            >
              <path
                d="M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"
              ></path>
            </svg>
          </button>
        </div>

        <p
          class="faq-content max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out text-sm text-white/80 leading-normal pt-2"
        >
          Já nas primeiras semanas, com aplicações práticas no seu dia a dia.
        </p>
      </div>

      <!-- FAQ Item 3 -->
      <div
        class="faq-item relative flex flex-col gap-2 p-6 rounded-lg border border-white/12 bg-linear-to-r from-white/4 to-transparent transition-all duration-300 ease-out"
      >
        <div class="flex items-start justify-between cursor-pointer faq-trigger">
          <h3
            class="text-lg font-semibold text-[#F2F2F2] font-outfit leading-tight"
          >
            É individual ou em grupo?
          </h3>
          <button
            class="shrink-0 w-6 h-6 text-[#F2F2F2] cursor-pointer"
            aria-label="Expandir"
          >
            <svg
              fill="currentColor"
              viewBox="0 0 24 24"
              class="faq-icon cursor-pointer transition-transform duration-300"
            >
              <path
                d="M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"
              ></path>
            </svg>
          </button>
        </div>

        <p
          class="faq-content max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out text-sm text-white/80 leading-normal pt-2"
        >
          Individual, para respeitar seu contexto e seus objetivos.
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  const faqItems = document.querySelectorAll<HTMLElement>('[data-faq] .faq-item');

  faqItems.forEach((item) => {
    const trigger = item.querySelector<HTMLElement>('.faq-trigger');
    const content = item.querySelector<HTMLElement>('.faq-content');
    const icon = item.querySelector<SVGSVGElement>('.faq-icon');

    if (!trigger || !content || !icon) return;

    trigger.addEventListener('click', () => {
      const isOpen = item.classList.contains('open');

      faqItems.forEach((i) => {
        i.classList.remove('open');

        const c = i.querySelector<HTMLElement>('.faq-content');
        if (c) {
          c.style.maxHeight = '0px';
          c.classList.remove('opacity-100');
          c.classList.add('opacity-0');
        }

        const path = i.querySelector<SVGPathElement>('.faq-icon path');
        if (path) {
          path.setAttribute(
            'd',
            'M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z'
          );
        }

        const bar = i.querySelector('.faq-bar');
        if (bar) bar.remove();
      });

      if (!isOpen) {
        item.classList.add('open');

        content.style.maxHeight = content.scrollHeight + 'px';
        content.classList.remove('opacity-0');
        content.classList.add('opacity-100');

        const path = icon.querySelector<SVGPathElement>('path');
        if (path) {
          path.setAttribute('d', 'M19 11H5V13H19V11Z');
        }

        const bar = document.createElement('div');
        bar.className =
          'faq-bar absolute top-0 left-0 right-0 h-1 bg-[#4489E3] rounded-t-lg origin-left scale-x-0 opacity-0 transition-all duration-300';

        item.prepend(bar);

        requestAnimationFrame(() => {
          bar.classList.remove('scale-x-0', 'opacity-0');
          bar.classList.add('scale-x-100', 'opacity-100');
        });
      }
    });
  });
</script>

